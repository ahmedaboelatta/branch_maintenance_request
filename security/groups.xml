<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Branch User Group -->
        <record id="group_branch_user" model="res.groups">
            <field name="name">Branch User</field>
            <field name="category_id" ref="base.module_category_services"/>
        </record>
        
        <!-- Maintenance Manager Group -->
        <record id="group_maintenance_manager" model="res.groups">
            <field name="name">Maintenance Manager</field>
            <field name="category_id" ref="base.module_category_services"/>
        </record>
        
        <record id="group_branch_user" model="res.groups">
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>
        
        <record id="group_maintenance_manager" model="res.groups">
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>
        
        <!-- Record Rules for Maintenance Request -->
        <record id="rule_branch_own" model="ir.rule">
            <field name="name">Branch User: Own Requests</field>
            <field name="model_id" ref="model_branch_maintenance_request"/>
            <field name="domain_force">[('user_id', '=', user.id)]</field>
            <field name="groups" eval="[(4, ref('group_branch_user'))]"/>
            <field name="perm_read">1</field>
            <field name="perm_write">1</field>
            <field name="perm_create">1</field>
            <field name="perm_unlink">0</field>
        </record>
        
        <record id="rule_manager_all" model="ir.rule">
            <field name="name">Manager: All Requests</field>
            <field name="model_id" ref="model_branch_maintenance_request"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_maintenance_manager'))]"/>
            <field name="perm_read">1</field>
            <field name="perm_write">1</field>
            <field name="perm_create">1</field>
            <field name="perm_unlink">1</field>
        </record>
        
        <!-- Record Rules for Branch - Branch User can only read -->
        <record id="rule_branch_readonly" model="ir.rule">
            <field name="name">Branch User: Read Only Branches</field>
            <field name="model_id" ref="model_branch_maintenance_branch"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_branch_user'))]"/>
            <field name="perm_read">1</field>
            <field name="perm_write">0</field>
            <field name="perm_create">0</field>
            <field name="perm_unlink">0</field>
        </record>
        
        <!-- Record Rules for Category - Branch User can only read -->
        <record id="rule_category_readonly" model="ir.rule">
            <field name="name">Branch User: Read Only Categories</field>
            <field name="model_id" ref="model_branch_maintenance_category"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_branch_user'))]"/>
            <field name="perm_read">1</field>
            <field name="perm_write">0</field>
            <field name="perm_create">0</field>
            <field name="perm_unlink">0</field>
        </record>
        
        <!-- Record Rules for Equipment - Branch User can only read -->
        <record id="rule_equipment_readonly" model="ir.rule">
            <field name="name">Branch User: Read Only Equipment</field>
            <field name="model_id" ref="model_branch_maintenance_equipment"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_branch_user'))]"/>
            <field name="perm_read">1</field>
            <field name="perm_write">0</field>
            <field name="perm_create">0</field>
            <field name="perm_unlink">0</field>
        </record>
        
        <!-- Record Rules for Equipment Model - Branch User can only read -->
        <record id="rule_equipment_model_readonly" model="ir.rule">
            <field name="name">Branch User: Read Only Equipment Models</field>
            <field name="model_id" ref="model_branch_maintenance_equipment_model"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_branch_user'))]"/>
            <field name="perm_read">1</field>
            <field name="perm_write">0</field>
            <field name="perm_create">0</field>
            <field name="perm_unlink">0</field>
        </record>
    </data>
</odoo>
